<app-header></app-header>
<div class="passenger-container">
  <div class="passenger-flight-details">
  <div class="flight-details-bg-container">
    <img class="passenger-booking-img" src="https://www.cnib.ca/sites/default/files/styles/banner_image_wide/public/images/2020-01/Airport%20Banner.jpg?h=7acbc861&itok=04D3SWly." alt="airport"/>
  <div class="logo-fl-number">
    <img class="logo-img" [src]="flights?.logo" alt="Air India Logo">
    <div>
        <h2>{{flights.airline}}</h2>
        <p class="flight-no"><strong>Flight Number:</strong> {{flights.flightNumber}}</p>
    </div>
</div>
<div class="flight-details-container">
  <h2>Flight Details</h2>
  <div class="flight-details-section">
      <p><strong>Departure:</strong> {{flights?.departure?.place}}</p>|
      <p><strong>Date:</strong> {{flights?.departure?.date}}</p>|
      <p><strong>Time:</strong> {{flights?.departure?.time}}</p>
  </div>

  <div class="flight-details-section">
      <p><strong>Destination:</strong> {{flights?.destination?.place}}</p>|
      <p><strong>Date:</strong> {{flights?.destination?.date}}</p>|
      <p><strong>Time:</strong> {{flights?.destination?.time}}</p>
  </div>

  <div class="flight-details-section">
      <p><strong>Duration:</strong> {{flights?.duration}}</p>|
      <p><strong>Price:</strong> ${{flights?.price}}</p>
  </div>
</div>
  <ul class="similar-flight-container">
    <h1>View Similar Flights</h1>
    <app-view-similar-flights [departurePlace] = "flights.departure?.place"></app-view-similar-flights>
  </ul>
</div>
  <div class="passenger-form-container">
    <h1>Booking Form</h1>
    <form [formGroup]="flightBookingForm" (ngSubmit)="onSubmit()">
      <!-- Passengers -->
      <div formArrayName="passengers">
        <div
          class="passenger-card"
          *ngFor="let passenger of passengers.controls; let i = index"
          [formGroupName]="i"
        >
          <h3>Passenger {{ i + 1 }}</h3>
            <div class="input-group">
              <label for="name">Name:</label>
              <input id="name" formControlName="name" />
              <div *ngIf="passenger.get('name')?.invalid && passenger.get('name')?.touched" class="error">
                Name is required.
              </div>

            <div class="input-group">
              <label for="age">Age:</label>
              <input id="age" type="number" formControlName="age" />
              <div *ngIf="passenger.get('age')?.invalid && passenger.get('age')?.touched" class="error">
                Age is required and must be greater than 0.
              </div>
            </div>
          </div>

          <div class="input-row">
            <label>Gender:</label>
            <div class="gender-options">
              <input type="radio" value="Male" formControlName="gender" id="male-{{ i }}" />
              <label for="male-{{ i }}">Male</label>
              <input type="radio" value="Female" formControlName="gender" id="female-{{ i }}" />
              <label for="female-{{ i }}">Female</label>
              <input type="radio" value="Others" formControlName="gender" id="others-{{ i }}" />
              <label for="others-{{ i }}">Others</label>
            </div>
          </div>

            <div class="input-group">
              <label for="passportNumber">Passport Number:</label>
              <input id="passportNumber" formControlName="passportNumber" />
              <div *ngIf="passenger.get('passportNumber')?.invalid && passenger.get('passportNumber')?.touched" class="error">
                Passport Number is required.
              </div>
            </div>

            <div class="input-group">
              <label for="phoneNumber">Phone Number:</label>
              <input id="phoneNumber" formControlName="phoneNumber" />
              <div *ngIf="passenger.get('phoneNumber')?.invalid && passenger.get('phoneNumber')?.touched" class="error">
                Phone Number is required.
              </div>
            </div>

          <button type="button" (click)="removePassenger(i)" class="remove-btn" *ngIf="passengers.length > 1">
            <i class="fa-solid fa-trash-can"></i>  
            Remove
          </button>
        </div>
      </div>
    <div class="form-btn">
        <button type="button" class="add-btn" (click)="addPassenger()"><span>+</span>  Add</button>
        <button type="submit" class="submit-btn">Submit</button>
    </div>
    </form>
  </div>
</div>
</div>

<div class="modal modal1" *ngIf="isBooked">
  <div class="modal-content modal-success">
    <p>Successfully Booked!</p>
  </div>
</div>

<div class="modal modal1" *ngIf="isBookingFailure">
  <div class="modal-content modal-failure">
    <span class="close" (click)="onBookingToggle()">&times;</span>
      <p>Check all the credentials.</p>
  </div>
</div>
